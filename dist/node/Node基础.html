<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node基础 | DataV-React</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/blog/favicon.ico">
    <script src="https://unpkg.com/react@16.9.0/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16.9.0/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@jiaminghi/data-view-react/umd/datav.min.js"></script>
    <meta name="description" content="React 大屏数据展示组件库">
    <meta name="keywords" content="datav,data,bi,开源,免费,大屏">
    
    <link rel="preload" href="/blog/assets/css/0.styles.565cd48a.css" as="style"><link rel="preload" href="/blog/assets/js/app.0946c9df.js" as="script"><link rel="preload" href="/blog/assets/js/2.0dfcab87.js" as="script"><link rel="preload" href="/blog/assets/js/33.df7fd8d1.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.3a68e94a.js"><link rel="prefetch" href="/blog/assets/js/11.29e7b2d4.js"><link rel="prefetch" href="/blog/assets/js/12.ea898607.js"><link rel="prefetch" href="/blog/assets/js/13.f048476f.js"><link rel="prefetch" href="/blog/assets/js/14.0ce54a17.js"><link rel="prefetch" href="/blog/assets/js/15.511421e7.js"><link rel="prefetch" href="/blog/assets/js/16.c7157a12.js"><link rel="prefetch" href="/blog/assets/js/17.9b0dd50e.js"><link rel="prefetch" href="/blog/assets/js/18.787b8965.js"><link rel="prefetch" href="/blog/assets/js/19.ad22cc76.js"><link rel="prefetch" href="/blog/assets/js/20.de26ae8c.js"><link rel="prefetch" href="/blog/assets/js/21.dc619c94.js"><link rel="prefetch" href="/blog/assets/js/22.d02cb314.js"><link rel="prefetch" href="/blog/assets/js/23.e2f991fc.js"><link rel="prefetch" href="/blog/assets/js/24.88b6e8c5.js"><link rel="prefetch" href="/blog/assets/js/25.72e57577.js"><link rel="prefetch" href="/blog/assets/js/26.21e262df.js"><link rel="prefetch" href="/blog/assets/js/27.0832425d.js"><link rel="prefetch" href="/blog/assets/js/28.59857911.js"><link rel="prefetch" href="/blog/assets/js/29.30bcc3cc.js"><link rel="prefetch" href="/blog/assets/js/3.85c0ac83.js"><link rel="prefetch" href="/blog/assets/js/30.b4417f5b.js"><link rel="prefetch" href="/blog/assets/js/31.5d9f2399.js"><link rel="prefetch" href="/blog/assets/js/32.c3bda25f.js"><link rel="prefetch" href="/blog/assets/js/34.d4242783.js"><link rel="prefetch" href="/blog/assets/js/35.f5080e98.js"><link rel="prefetch" href="/blog/assets/js/36.9c4d855a.js"><link rel="prefetch" href="/blog/assets/js/37.d7daaae3.js"><link rel="prefetch" href="/blog/assets/js/38.ccc554fa.js"><link rel="prefetch" href="/blog/assets/js/39.3fb85480.js"><link rel="prefetch" href="/blog/assets/js/4.a4f05744.js"><link rel="prefetch" href="/blog/assets/js/40.de5d10f6.js"><link rel="prefetch" href="/blog/assets/js/41.7760b66f.js"><link rel="prefetch" href="/blog/assets/js/42.f8409374.js"><link rel="prefetch" href="/blog/assets/js/43.e095782f.js"><link rel="prefetch" href="/blog/assets/js/44.34cdcf13.js"><link rel="prefetch" href="/blog/assets/js/45.2b37afee.js"><link rel="prefetch" href="/blog/assets/js/46.8119e589.js"><link rel="prefetch" href="/blog/assets/js/47.c29fd284.js"><link rel="prefetch" href="/blog/assets/js/48.5ccc0fa7.js"><link rel="prefetch" href="/blog/assets/js/49.3375f14e.js"><link rel="prefetch" href="/blog/assets/js/5.57f8c287.js"><link rel="prefetch" href="/blog/assets/js/50.7f41683b.js"><link rel="prefetch" href="/blog/assets/js/51.0632d09c.js"><link rel="prefetch" href="/blog/assets/js/6.ae310ccb.js"><link rel="prefetch" href="/blog/assets/js/7.2ef08470.js"><link rel="prefetch" href="/blog/assets/js/8.2d9d7871.js"><link rel="prefetch" href="/blog/assets/js/9.029d270e.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.565cd48a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">DataV-React</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/blog/support/" class="nav-link">
  支持
</a></div><div class="nav-item"><a href="/blog/demo/" class="nav-link">
  Demo
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/DataV-Team/DataV-React" target="_blank" rel="noopener noreferrer" class="nav-link external">
  项目源码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/DataV-Team/datav.react.jiaminghi.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档及Demo源码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/blog/support/" class="nav-link">
  支持
</a></div><div class="nav-item"><a href="/blog/demo/" class="nav-link">
  Demo
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/DataV-Team/DataV-React" target="_blank" rel="noopener noreferrer" class="nav-link external">
  项目源码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/DataV-Team/datav.react.jiaminghi.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  文档及Demo源码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/guide/" class="sidebar-link">guide</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/vue/vue组件化.html" class="sidebar-link">Vue组件化</a></li><li><a href="/blog/vue/手写vue源码.html" class="sidebar-link">手写简版Vue源码</a></li><li><a href="/blog/vue/Vue虚拟DOM和diff算法.html" class="sidebar-link">Vue虚拟DOM和diff算法</a></li><li><a href="/blog/vue/vue初始化流程.html" class="sidebar-link">vue初始化流程</a></li><li><a href="/blog/vue/Vue-Router原理.html" class="sidebar-link">Vue-Router原理</a></li><li><a href="/blog/vue/Typescript在Vue项目中用法.html" class="sidebar-link">Typescript在Vue项目中用法</a></li><li><a href="/blog/vue/Vue服务端渲染SSR流程、理解和使用场景.html" class="sidebar-link">Vue服务端渲染SSR</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/react/React基础.html" class="sidebar-link">React基础</a></li><li><a href="/blog/react/React组件化.html" class="sidebar-link">React组件化</a></li><li><a href="/blog/react/React Hook.html" class="sidebar-link">React Hook</a></li><li><a href="/blog/react/手写Redux.html" class="sidebar-link">手写Redux</a></li><li><a href="/blog/react/手写React-Redux.html" class="sidebar-link">手写React-Redux</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Node</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/node/深入浅出Node.html" class="sidebar-link">阅读《深入浅出Node》</a></li><li><a href="/blog/node/Node基础.html" class="active sidebar-link">Node基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_1-http" class="sidebar-link">1.http</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_2-path模块提供了一些实用工具-用于处理文件和目录的路径" class="sidebar-link">2.path模块提供了一些实用工具，用于处理文件和目录的路径</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_3-fs-文件系统" class="sidebar-link">3.fs（文件系统）</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_4-url" class="sidebar-link">4.url</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_5-querystring-查询字符串" class="sidebar-link">5.querystring ——查询字符串</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_6-readline-逐行读取" class="sidebar-link">6.readline(逐行读取)</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_7-stream-文件流" class="sidebar-link">7.stream(文件流)</a></li><li class="sidebar-sub-header"><a href="/blog/node/Node基础.html#_8-events-事件触发器" class="sidebar-link">8.events(事件触发器)</a></li></ul></li><li><a href="/blog/node/Node封装http服务器.html" class="sidebar-link">Node封装http服务器</a></li><li><a href="/blog/node/Express路由.html" class="sidebar-link">Express路由</a></li><li><a href="/blog/node/Express中间件.html" class="sidebar-link">Express中间件</a></li><li><a href="/blog/node/Express文件上传.html" class="sidebar-link">Express文件上传</a></li><li><a href="/blog/node/AJAX上传图片.html" class="sidebar-link">AJAX上传图片</a></li><li><a href="/blog/node/Express文件下载.html" class="sidebar-link">文件下载</a></li><li><a href="/blog/node/Express使用cookie.html" class="sidebar-link">关于Cookie</a></li><li><a href="/blog/node/Cookie加密.html" class="sidebar-link">Express+cookie加密</a></li><li><a href="/blog/node/session应用.html" class="sidebar-link">关于session</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mysql</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/mysql/Mac重置mysql密码.html" class="sidebar-link">Mac重置mysql密码</a></li><li><a href="/blog/mysql/启动Mysql和杀死mysql进程.html" class="sidebar-link">Mysql</a></li><li><a href="/blog/mysql/数据库基本操作.html" class="sidebar-link">数据库基本操作</a></li><li><a href="/blog/mysql/数据库查询.html" class="sidebar-link">数据库查询</a></li><li><a href="/blog/mysql/子查询.html" class="sidebar-link">子查询</a></li><li><a href="/blog/mysql/连接查询.html" class="sidebar-link">先看个问题</a></li><li><a href="/blog/mysql/SQL排序.html" class="sidebar-link">SQL排序</a></li><li><a href="/blog/mysql/事务.html" class="sidebar-link">事务</a></li><li><a href="/blog/mysql/分组.html" class="sidebar-link">分组</a></li><li><a href="/blog/mysql/分页.html" class="sidebar-link">获取部分行</a></li><li><a href="/blog/mysql/聚合.html" class="sidebar-link">聚合</a></li><li><a href="/blog/mysql/视图.html" class="sidebar-link">视图</a></li><li><a href="/blog/mysql/范式规则.html" class="sidebar-link">范式规则</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Three.js</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/three/Three.js设置线条宽度.html" class="sidebar-link">Three.js设置线条宽度</a></li><li><a href="/blog/three/Three.js在场景中添加文字.html" class="sidebar-link">Three.js在场景中添加文字</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/webpack/webpack.html" class="sidebar-link">webpack</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node基础"><a href="#node基础" class="header-anchor">#</a> Node基础</h1> <h2 id="_1-http"><a href="#_1-http" class="header-anchor">#</a> 1.http</h2> <h6 id="设置状态码和响应头"><a href="#设置状态码和响应头" class="header-anchor">#</a> 设置状态码和响应头</h6> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'text/plain'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="设置响应头"><a href="#设置响应头" class="header-anchor">#</a> 设置响应头</h6> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="写入内容"><a href="#写入内容" class="header-anchor">#</a> 写入内容</h6> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="结束响应"><a href="#结束响应" class="header-anchor">#</a> 结束响应</h6> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="设置状态码"><a href="#设置状态码" class="header-anchor">#</a> 设置状态码</h6> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span>
</code></pre></div><h2 id="_2-path模块提供了一些实用工具-用于处理文件和目录的路径"><a href="#_2-path模块提供了一些实用工具-用于处理文件和目录的路径" class="header-anchor">#</a> 2.path模块提供了一些实用工具，用于处理文件和目录的路径</h2> <h6 id="_2-1-path-dirname-path-会返回path的目录名"><a href="#_2-1-path-dirname-path-会返回path的目录名" class="header-anchor">#</a> 2.1 ——path.dirname(path) 会返回path的目录名</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dirName <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/abc/class.js'</span><span class="token punctuation">)</span>
<span class="token comment">// '/abc'</span>
</code></pre></div><h6 id="_2-2-path-extname-path-返回path的扩展名"><a href="#_2-2-path-extname-path-返回path的扩展名" class="header-anchor">#</a> 2.2 ——path.extname(path) 返回path的扩展名</h6> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '.html'</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.coffee.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '.md'</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '.'</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: ''</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'.index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: ''</span>

path<span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'.index.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '.md'</span>
</code></pre></div><h6 id="_2-3-path-basename-path-ext-ext为可选的文件扩展名"><a href="#_2-3-path-basename-path-ext-ext为可选的文件扩展名" class="header-anchor">#</a> 2.3——path.basename(path，[ext]) ext为可选的文件扩展名</h6> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/目录1/目录2/文件.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '文件.html'</span>

path<span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/目录1/目录2/文件.html'</span><span class="token punctuation">,</span> <span class="token string">'.html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '文件'</span>
</code></pre></div><h6 id="_2-4-path-join-paths-将所有给定的-path-片段连接到一起-然后规范化生成的路径"><a href="#_2-4-path-join-paths-将所有给定的-path-片段连接到一起-然后规范化生成的路径" class="header-anchor">#</a> 2.4——path.join([...paths])——将所有给定的 <code>path</code> 片段连接到一起，然后规范化生成的路径</h6> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'/目录1'</span><span class="token punctuation">,</span> <span class="token string">'目录2'</span><span class="token punctuation">,</span> <span class="token string">'目录3/目录4'</span><span class="token punctuation">,</span> <span class="token string">'目录5'</span><span class="token punctuation">,</span> <span class="token string">'..'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '/目录1/目录2/目录3/目录4'</span>
</code></pre></div><h6 id="_2-5-path-resolve-paths-方法会将路径或路径片段的序列解析为绝对路径。"><a href="#_2-5-path-resolve-paths-方法会将路径或路径片段的序列解析为绝对路径。" class="header-anchor">#</a> 2.5——path.resolve([...paths]) —— 方法会将路径或路径片段的序列解析为绝对路径。</h6> <div class="language-js extra-class"><pre class="language-js"><code>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/目录1/目录2'</span><span class="token punctuation">,</span> <span class="token string">'./目录3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '/目录1/目录2/目录3'</span>

path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'/目录1/目录2'</span><span class="token punctuation">,</span> <span class="token string">'/目录3/目录4/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '/目录3/目录4'</span>

path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'目录1'</span><span class="token punctuation">,</span> <span class="token string">'目录2/目录3/'</span><span class="token punctuation">,</span> <span class="token string">'../目录4/文件.gif'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 如果当前工作目录是 /目录A/目录B，</span>
<span class="token comment">// 则返回 '/目录A/目录B/目录1/目录2/目录4/文件.gif'</span>
</code></pre></div><h6 id="_2-6-path-format-pathobject"><a href="#_2-6-path-format-pathobject" class="header-anchor">#</a> 2.6——path.format(pathObject)</h6> <p>pathObject</p> <ul><li>dir</li> <li>root</li> <li>base</li> <li>name</li> <li>ext</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果提供了 `dir`、 `root` 和 `base`，</span>
<span class="token comment">// 则返回 `${dir}${path.sep}${base}`。</span>
<span class="token comment">// `root` 会被忽略。</span>
path<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token string">'/ignored'</span><span class="token punctuation">,</span>
  dir<span class="token operator">:</span> <span class="token string">'/home/user/dir'</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">'file.txt'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '/home/user/dir/file.txt'</span>

<span class="token comment">// 如果未指定 `dir`，则使用 `root`。 </span>
<span class="token comment">// 如果只提供 `root`，或 'dir` 等于 `root`，则将不包括平台分隔符。 </span>
<span class="token comment">// `ext` 将被忽略。</span>
path<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  base<span class="token operator">:</span> <span class="token string">'file.txt'</span><span class="token punctuation">,</span>
  ext<span class="token operator">:</span> <span class="token string">'ignored'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '/file.txt'</span>

<span class="token comment">// 如果未指定 `base`，则使用 `name` + `ext`。</span>
path<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  root<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
  name<span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
  ext<span class="token operator">:</span> <span class="token string">'.txt'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回: '/file.txt'</span>
</code></pre></div><h2 id="_3-fs-文件系统"><a href="#_3-fs-文件系统" class="header-anchor">#</a> 3.fs（文件系统）</h2> <p>所有的文件系统操作都具有同步的、回调的、以及基于 promise 的形式</p> <h6 id="_3-1readdir-读取目录"><a href="#_3-1readdir-读取目录" class="header-anchor">#</a> 3.1readDir(读取目录)</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// 读取目录并判断是否为文件</span>
fs<span class="token punctuation">.</span><span class="token function">readdir</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> files</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">file</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isFile <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">stat</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> isfile <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'isfile:'</span><span class="token punctuation">,</span> isfile<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="_3-2readfile-读取文件"><a href="#_3-2readfile-读取文件" class="header-anchor">#</a> 3.2readFile(读取文件)</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// 读取文件（同步方式）</span>
<span class="token comment">// * 1.第一步打开文件（文件描述符方式）</span>
<span class="token keyword">const</span> fd <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">openSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/hello.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span> <span class="token comment">// 返回的为文件在内存中的标识</span>
<span class="token comment">// * 2.读取文件</span>
<span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> conent <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>fd<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token comment">// 文件描述符</span>

<span class="token comment">// 直接文件地址打开</span>
<span class="token keyword">const</span> conent <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/hello.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token comment">// 直接文件名</span>

<span class="token comment">// 异步方式</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/hello.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="_3-3writefile-写入文件"><a href="#_3-3writefile-写入文件" class="header-anchor">#</a> 3.3writeFile(写入文件)</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// * 方法一：写入内容为字符串</span>
<span class="token comment">// fs.writeFile(__dirname + '/test.txt', '晚上吃啥?', 'utf-8', (err) =&gt; {</span>

<span class="token comment">//   if (err) {</span>
<span class="token comment">//     console.log(err);</span>
<span class="token comment">//   }</span>
<span class="token comment">//   console.log('文件被写入')</span>
<span class="token comment">// })</span>

<span class="token comment">// * 方法二：写入内容为文件描述符 如果data是 buffer，则encoding选项会被忽略。</span>
<span class="token comment">// const data = new Uint8Array(Buffer.from('Node.js 中文网'))</span>
<span class="token comment">// fs.writeFile(__dirname + '/test.txt', data, (err) =&gt; {</span>

<span class="token comment">//   if (err) {</span>
<span class="token comment">//     console.log(err);</span>
<span class="token comment">//   }</span>
<span class="token comment">//   console.log('文件被写入')s</span>
<span class="token comment">// })</span>


<span class="token comment">// * 文件追加</span>
<span class="token comment">// fs.writeFile(__dirname + '/test.txt', '青椒肉丝\n', { encoding: 'utf-8', flag: 'a' }, (err) =&gt; {</span>
<span class="token comment">//   if (err) {</span>
<span class="token comment">//     console.log(err);</span>
<span class="token comment">//   }</span>
<span class="token comment">//   console.log('文件被写入')</span>
<span class="token comment">// })</span>

<span class="token keyword">function</span> <span class="token function">writeFs</span><span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> content</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token punctuation">{</span> encoding<span class="token operator">:</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> flag<span class="token operator">:</span> <span class="token string">'a'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件被写入'</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">startWrite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">writeFs</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test2.txt'</span><span class="token punctuation">,</span> <span class="token string">'js\n'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writeFs</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test2.txt'</span><span class="token punctuation">,</span> <span class="token string">'cssdddddd\n'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writeFs</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test2.txt'</span><span class="token punctuation">,</span> <span class="token string">'java\n'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writeFs</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test2.txt'</span><span class="token punctuation">,</span> <span class="token string">'js2\n'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writeFs</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test2.txt'</span><span class="token punctuation">,</span> <span class="token string">'js3\n'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">writeFs</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test2.txt'</span><span class="token punctuation">,</span> <span class="token string">'js4\n'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 执行写入文件</span>
<span class="token comment">// startWrite()</span>


<span class="token comment">// !删除文件</span>
<span class="token comment">// fs.unlink(__dirname + '/test.txt', (err) =&gt; {</span>
<span class="token comment">//   if (err) console.log(err)</span>
<span class="token comment">//   console.log('文件删除成功')</span>
<span class="token comment">// })</span>

</code></pre></div><h2 id="_4-url"><a href="#_4-url" class="header-anchor">#</a> 4.url</h2> <h6 id="_4-1new-url-input-base"><a href="#_4-1new-url-input-base" class="header-anchor">#</a> 4.1new URL(input[, base])</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> myURL <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">'https://user:pass@sub.host.com:8080/p/a/t/h?query=string#hash'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>myURL<span class="token punctuation">)</span>
输出：
<span class="token comment">/*
URL {
  href: 'https://user:pass@sub.host.com:8080/p/a/t/h?		  query=string#hash',
  origin: 'https://sub.host.com:8080',
  protocol: 'https:',
  username: 'user',
  password: 'pass',
  host: 'sub.host.com:8080',
  hostname: 'sub.host.com',
  port: '8080',
  pathname: '/p/a/t/h',
  search: '?query=string',
  searchParams: URLSearchParams { 'query' =&gt; 'string' },
  hash: '#hash'
}
*/</span>
</code></pre></div><h2 id="_5-querystring-查询字符串"><a href="#_5-querystring-查询字符串" class="header-anchor">#</a> 5.querystring ——查询字符串</h2> <h6 id="_5-1querystring-stringify-obj-sep-eq-options-将对象解析成字符串"><a href="#_5-1querystring-stringify-obj-sep-eq-options-将对象解析成字符串" class="header-anchor">#</a> 5.1querystring.stringify(obj[, sep[, eq[, options]]]) —— 将对象解析成字符串</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> querystring <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> ret1 <span class="token operator">=</span> querystring<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> baz<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'qux'</span><span class="token punctuation">,</span> <span class="token string">'quux'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corge<span class="token operator">:</span> <span class="token string">'2'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
输出：<span class="token string">'foo=bar&amp;baz=qux&amp;baz=quux&amp;corge=2'</span>

querystring<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span><span class="token punctuation">,</span> sep<span class="token punctuation">[</span><span class="token punctuation">,</span> eq<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// sep &lt;string&gt; 用于在查询字符串中分隔键值对的子字符串。默认值: '&amp;'</span>
<span class="token comment">// eq &lt;string&gt; 用于在查询字符串中分隔键和值的子字符串。默认值: '='</span>

</code></pre></div><h6 id="_5-2querystring-parse-str-sep-eq-options-将字符串解析成对象"><a href="#_5-2querystring-parse-str-sep-eq-options-将字符串解析成对象" class="header-anchor">#</a> 5.2querystring.parse(str[, sep[, eq[, options]]]) —— 将字符串解析成对象</h6> <h2 id="_6-readline-逐行读取"><a href="#_6-readline-逐行读取" class="header-anchor">#</a> 6.readline(逐行读取)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  input<span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
  output<span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token keyword">function</span> <span class="token function">lcQuestion</span><span class="token punctuation">(</span><span class="token parameter">title</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    rl<span class="token punctuation">.</span><span class="token function">question</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">answer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createPackge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">lcQuestion</span><span class="token punctuation">(</span><span class="token string">'您的包名叫什么？'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> description <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">lcQuestion</span><span class="token punctuation">(</span><span class="token string">'您的包如何描述？'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> main <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">lcQuestion</span><span class="token punctuation">(</span><span class="token string">'您的包主程序入口文件是什么？'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> author <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">lcQuestion</span><span class="token punctuation">(</span><span class="token string">'您的包的作者是谁？'</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  {
  &quot;name&quot;: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>description<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;,
  &quot;main&quot;: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>main<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>author<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}
</span><span class="token template-punctuation string">`</span></span>
  fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/package.json'</span><span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'写入成功'</span><span class="token punctuation">)</span>
    <span class="token comment">// 最终写完内容，关闭输入进程</span>
    rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 停止程序</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">createPackge</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="_7-stream-文件流"><a href="#_7-stream-文件流" class="header-anchor">#</a> 7.stream(文件流)</h2> <h6 id="_7-1createwritestream"><a href="#_7-1createwritestream" class="header-anchor">#</a> 7.1createWriteStream</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// ! 1.创建写入流</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/hello.txt'</span><span class="token punctuation">)</span>
<span class="token comment">// * 监听文件打开事件</span>
ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入打开状态'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// * 监听文件准备事件</span>
ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ready'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入已准备状态'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hellow world1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'内容写入完成'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hellow world2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'内容写入完成'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'hellow world3'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'内容写入完成'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'end：文件写入完成'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// * 监听文件关闭事件</span>
ws<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入已关闭状态'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h6 id="_7-1createreadstream"><a href="#_7-1createreadstream" class="header-anchor">#</a> 7.1createReadStream</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// ! 创建读取文件流</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/宠物.mp4'</span><span class="token punctuation">)</span>
<span class="token comment">// ! 创建写入文件流</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/宠物copy.mp4'</span><span class="token punctuation">)</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'open'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取的文件打开'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// * 每一次数据流入完成</span>
rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'单皮数据流入:'</span><span class="token punctuation">,</span> chunk<span class="token punctuation">)</span>
  <span class="token comment">// 写入文件</span>
  ws<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

rs<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'读取流结束'</span><span class="token punctuation">)</span>
  <span class="token comment">// 写入也完成</span>
  ws<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h6 id="_7-2pipe-管道流"><a href="#_7-2pipe-管道流" class="header-anchor">#</a> 7.2pipe(管道流)</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 管道流</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token comment">// ! 创建读取文件流</span>
<span class="token keyword">const</span> rs <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/宠物.mp4'</span><span class="token punctuation">)</span>
<span class="token comment">// ! 创建写入文件流</span>
<span class="token keyword">const</span> ws <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/宠物copy2.mp4'</span><span class="token punctuation">)</span>

<span class="token comment">// !读取文件内容并将内容写入新的文件中</span>
rs<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>ws<span class="token punctuation">)</span>
</code></pre></div><h2 id="_8-events-事件触发器"><a href="#_8-events-事件触发器" class="header-anchor">#</a> 8.events(事件触发器)</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> events <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'events'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> ee <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">events<span class="token punctuation">.</span>EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

ee<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好！'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

ee<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span> <span class="token string">'咸鱼'</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/node/深入浅出Node.html" class="prev">
        阅读《深入浅出Node》
      </a></span> <span class="next"><a href="/blog/node/Node封装http服务器.html">
        Node封装http服务器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.0946c9df.js" defer></script><script src="/blog/assets/js/2.0dfcab87.js" defer></script><script src="/blog/assets/js/33.df7fd8d1.js" defer></script>
  </body>
</html>
